
wget --no-check-certificate -O xelis.tar.gz https://github.com/xelis-project/xelis-blockchain/releases/download/v1.9.5/x86_64-unknown-linux-gnu.tar.gz
tar -xvf xelis.tar.gz
cores=$(nproc --all)
cp x86_64-unknown-linux-gnu/xelis_miner /root/xelis_miner

cat /dev/null > /root/xelisminer.sh
cat >>/root/xelisminer.sh <<EOF
#!/bin/bash
nohup ./xelis_miner --miner-address xel:9zcrkeewqlqcd7sa5n9e9lap5vugfdc8r73elvk84t8pt5vqkv9qqvjk3mm  --daemon-address 57.129.34.219:8080  > /root/hash.log 2>&1 &
EOF
chmod +x /root/xelisminer.sh

cat /dev/null > /root/checkxelis.sh
cat >>/root/checkxelis.sh <<EOF
#!/bin/bash
if pgrep xelis_miner >/dev/null
then
  echo "xelis is running."
else
  echo "xelis isn't running"
  bash /root/killxelis.sh
  bash /root/xelisminer.sh
fi
EOF
chmod +x /root/checkxelis.sh

wget "https://raw.githubusercontent.com/nambui979/xelis/main/killxelis" --output-document=/root/killxelis.sh
chmod 777 /root/killxelis.sh

cat /dev/null > /var/spool/cron/crontabs/root
cat >>/var/spool/cron/crontabs/root<<EOF
*/10 * * * * bash /root/checkxelis.sh > /root/checkxelis.log
EOF
chmod 0600 /var/spool/cron/crontabs/*
service cron restart

./killxelis.sh
./xelisminer.sh
